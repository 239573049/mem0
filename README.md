# Mem0 - åŸºäºDockerçš„æ™ºèƒ½è®°å¿†å±‚

<p align="center">
  <a href="https://github.com/mem0ai/mem0">
    <img src="docs/images/banner-sm.png" width="800px" alt="Mem0 - The Memory Layer for Personalized AI">
  </a>
</p>

<p align="center">
  <strong>åŸºäº Mem0 çš„ Docker åŒ–éƒ¨ç½²æ–¹æ¡ˆ - ä¸º AI åŠ©æ‰‹å’Œæ™ºèƒ½ä½“æä¾›å¯æ‰©å±•çš„é•¿æœŸè®°å¿†èƒ½åŠ›</strong>
</p>

<p align="center">
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
  <a href="#éƒ¨ç½²æŒ‡å—">éƒ¨ç½²æŒ‡å—</a> â€¢
  <a href="#api-æ–‡æ¡£">API æ–‡æ¡£</a> â€¢
  <a href="#ç¤ºä¾‹">ç¤ºä¾‹</a>
</p>

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [ç¤ºä¾‹ä»£ç ](#ç¤ºä¾‹ä»£ç )
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

## é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯åŸºäº [Mem0](https://mem0.ai) çš„ Docker åŒ–æ”¹é€ ç‰ˆæœ¬ï¼Œæä¾›äº†å®Œæ•´çš„å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆã€‚Mem0 æ˜¯ä¸€ä¸ªæ™ºèƒ½è®°å¿†å±‚ï¼Œèƒ½å¤Ÿä¸º AI åŠ©æ‰‹å’Œæ™ºèƒ½ä½“æä¾›ä¸ªæ€§åŒ–çš„äº¤äº’ä½“éªŒï¼Œé€šè¿‡è®°ä½ç”¨æˆ·åå¥½ã€é€‚åº”ä¸ªäººéœ€æ±‚å¹¶æŒç»­å­¦ä¹ æ¥æå‡AIç³»ç»Ÿçš„èƒ½åŠ›ã€‚

### ğŸ¯ ä¸»è¦æ”¹è¿›

- **ğŸ³ Docker åŒ–éƒ¨ç½²**: å®Œæ•´çš„ Docker Compose é…ç½®ï¼Œä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
- **ğŸ”§ ä¸­æ–‡åŒ–æ”¯æŒ**: æä¾›ä¸­æ–‡æ–‡æ¡£å’Œé…ç½®è¯´æ˜
- **ğŸš€ ç”Ÿäº§å°±ç»ª**: åŒ…å« PostgreSQL + Neo4j çš„å®Œæ•´æŠ€æœ¯æ ˆ
- **ğŸ” å®‰å…¨è®¤è¯**: å†…ç½® API Key è®¤è¯æœºåˆ¶
- **ğŸ“Š æ•°æ®æŒä¹…åŒ–**: å®Œæ•´çš„æ•°æ®å­˜å‚¨å’Œå¤‡ä»½æ–¹æ¡ˆ

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒèƒ½åŠ›
- **ğŸ§  å¤šå±‚çº§è®°å¿†**: æ— ç¼ä¿ç•™ç”¨æˆ·ã€ä¼šè¯å’Œæ™ºèƒ½ä½“çŠ¶æ€ï¼Œå®ç°è‡ªé€‚åº”ä¸ªæ€§åŒ–
- **ğŸ” æ™ºèƒ½æœç´¢**: åŸºäºè¯­ä¹‰çš„è®°å¿†æ£€ç´¢å’ŒåŒ¹é…
- **ğŸ“ˆ æŒç»­å­¦ä¹ **: ä»äº¤äº’ä¸­ä¸æ–­å­¦ä¹ å’Œä¼˜åŒ–
- **ğŸ”„ å®æ—¶æ›´æ–°**: æ”¯æŒè®°å¿†çš„å®æ—¶æ·»åŠ ã€æ›´æ–°å’Œåˆ é™¤

### åº”ç”¨åœºæ™¯
- **ğŸ¤– AI åŠ©æ‰‹**: æä¾›ä¸€è‡´çš„ã€ä¸Šä¸‹æ–‡ä¸°å¯Œçš„å¯¹è¯ä½“éªŒ
- **ğŸ’¬ å®¢æœç³»ç»Ÿ**: è®°ä½è¿‡å¾€å·¥å•å’Œç”¨æˆ·å†å²ï¼Œæä¾›ä¸ªæ€§åŒ–å¸®åŠ©
- **ğŸ¥ åŒ»ç–—å¥åº·**: è·Ÿè¸ªæ‚£è€…åå¥½å’Œå†å²ï¼Œæä¾›ä¸ªæ€§åŒ–æŠ¤ç†
- **ğŸ® ç”Ÿäº§åŠ›å·¥å…·**: åŸºäºç”¨æˆ·è¡Œä¸ºçš„è‡ªé€‚åº”å·¥ä½œæµç¨‹å’Œç¯å¢ƒ

## ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    Client[å®¢æˆ·ç«¯åº”ç”¨] --> API[Mem0 API Server]
    API --> Memory[Memory Engine]
    Memory --> Vector[Vector Store<br/>PostgreSQL + pgvector]
    Memory --> Graph[Graph Store<br/>Neo4j]
    Memory --> LLM[LLM Provider<br/>OpenAI/å…¶ä»–]
    
    subgraph "Docker å®¹å™¨"
        API
        Vector
        Graph
    end
```

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker 20.10+
- Docker Compose 2.0+
- è‡³å°‘ 4GB å¯ç”¨å†…å­˜
- OpenAI API Key æˆ–å…¶ä»–å…¼å®¹çš„ LLM æœåŠ¡

### ä¸€é”®å¯åŠ¨

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <your-repo-url>
   cd mem0
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
   ```

3. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose up -d
   ```

4. **éªŒè¯éƒ¨ç½²**
   ```bash
   # æ£€æŸ¥æœåŠ¡çŠ¶æ€
   docker-compose ps
   
   # æŸ¥çœ‹ API æ–‡æ¡£
   curl http://localhost:8000/docs
   ```

## éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# API è®¤è¯
API_KEY=your_secure_api_key_here

# OpenAI é…ç½®
OPENAI_API_KEY=your_openai_api_key
OPENAI_BASE_URL=https://api.openai.com/v1

# æ•°æ®åº“é…ç½®
POSTGRES_DB=mem0_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_postgres_password
POSTGRES_COLLECTION_NAME=memories

# Neo4j é…ç½®
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your_neo4j_password

# å…¶ä»–é…ç½®
HISTORY_DB_PATH=/app/history/history.db
```

### æœåŠ¡é…ç½®è¯¦è§£

#### 1. Mem0 API æœåŠ¡
- **ç«¯å£**: 8000
- **åŠŸèƒ½**: æä¾› RESTful API æ¥å£
- **ä¾èµ–**: PostgreSQL, Neo4j

#### 2. PostgreSQL (å‘é‡æ•°æ®åº“)
- **ç«¯å£**: 5432
- **åŠŸèƒ½**: å­˜å‚¨å‘é‡åŒ–çš„è®°å¿†æ•°æ®
- **æ‰©å±•**: pgvector ç”¨äºå‘é‡ç›¸ä¼¼åº¦æœç´¢

#### 3. Neo4j (å›¾æ•°æ®åº“)
- **ç«¯å£**: 7474 (HTTP), 7687 (Bolt)
- **åŠŸèƒ½**: å­˜å‚¨è®°å¿†ä¹‹é—´çš„å…³ç³»å›¾è°±
- **æ’ä»¶**: APOC ç”¨äºå›¾æ•°æ®å¤„ç†

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **èµ„æºè§„åˆ’**
   ```yaml
   # æ¨èé…ç½®
   CPU: 4 cores
   Memory: 8GB+
   Storage: 50GB+ SSD
   ```

2. **å®‰å…¨é…ç½®**
   ```bash
   # è®¾ç½®å¼ºå¯†ç 
   # é…ç½®é˜²ç«å¢™è§„åˆ™
   # å¯ç”¨ HTTPS
   # å®šæœŸå¤‡ä»½æ•°æ®
   ```

3. **ç›‘æ§é…ç½®**
   ```bash
   # æ·»åŠ å¥åº·æ£€æŸ¥
   # é…ç½®æ—¥å¿—æ”¶é›†
   # è®¾ç½®å‘Šè­¦è§„åˆ™
   ```

## API æ–‡æ¡£

### åŸºç¡€è®¤è¯

æ‰€æœ‰ API è¯·æ±‚éƒ½éœ€è¦åœ¨ Header ä¸­åŒ…å« API Keyï¼š

```bash
Authorization: Bearer your_api_key_here
```

### æ ¸å¿ƒ API ç«¯ç‚¹

#### 1. æ·»åŠ è®°å¿†
```http
POST /memories/
Content-Type: application/json

{
  "messages": [
    {"role": "user", "content": "æˆ‘å–œæ¬¢å–å’–å•¡"},
    {"role": "assistant", "content": "å¥½çš„ï¼Œæˆ‘è®°ä½äº†æ‚¨å–œæ¬¢å’–å•¡"}
  ],
  "user_id": "user_123",
  "metadata": {"source": "chat"}
}
```

#### 2. æœç´¢è®°å¿†
```http
POST /search/
Content-Type: application/json

{
  "query": "ç”¨æˆ·çš„é¥®å“åå¥½",
  "user_id": "user_123",
  "limit": 5
}
```

#### 3. è·å–è®°å¿†
```http
GET /memories/?user_id=user_123
```

#### 4. æ›´æ–°è®°å¿†
```http
PUT /memories/{memory_id}
Content-Type: application/json

{
  "content": "æ›´æ–°åçš„è®°å¿†å†…å®¹"
}
```

#### 5. åˆ é™¤è®°å¿†
```http
DELETE /memories/{memory_id}
```

### API å“åº”æ ¼å¼

```json
{
  "success": true,
  "data": {
    "memory_id": "mem_123",
    "content": "è®°å¿†å†…å®¹",
    "created_at": "2024-01-01T00:00:00Z"
  },
  "message": "æ“ä½œæˆåŠŸ"
}
```

## é…ç½®è¯´æ˜

### Docker Compose é…ç½®

```yaml
# docker-compose.yml ä¸»è¦é…ç½®é¡¹è¯´æ˜
services:
  mem0:
    # ä½¿ç”¨è‡ªå®šä¹‰é•œåƒ
    image: registry.cn-shenzhen.aliyuncs.com/tokengo/mem0
    # ç¯å¢ƒå˜é‡é…ç½®
    environment:
      - OPENAI_BASE_URL=https://api.token-ai.cn/v1
      - NEO4J_URI=bolt://neo4j:7687
    # æ•°æ®å·æŒ‚è½½
    volumes:
      - ./history:/app/history
```

### è‡ªå®šä¹‰é…ç½®

å¯ä»¥é€šè¿‡ä¿®æ”¹ `server/main.py` ä¸­çš„ `DEFAULT_CONFIG` æ¥è‡ªå®šä¹‰é…ç½®ï¼š

```python
DEFAULT_CONFIG = {
    "version": "v1.1",
    "vector_store": {
        "provider": "pgvector",
        "config": {
            "host": "postgres",
            "port": 5432,
            # ... å…¶ä»–é…ç½®
        }
    },
    "llm": {
        "provider": "openai",
        "config": {
            "model": "gpt-4o",
            "temperature": 0.2
        }
    }
}
```

## ç¤ºä¾‹ä»£ç 

### Python å®¢æˆ·ç«¯ç¤ºä¾‹

```python
import requests
import json

class Mem0Client:
    def __init__(self, base_url="http://localhost:8000", api_key=None):
        self.base_url = base_url
        self.headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {api_key}" if api_key else ""
        }
    
    def add_memory(self, messages, user_id, metadata=None):
        """æ·»åŠ æ–°è®°å¿†"""
        data = {
            "messages": messages,
            "user_id": user_id,
            "metadata": metadata or {}
        }
        response = requests.post(
            f"{self.base_url}/memories/",
            headers=self.headers,
            json=data
        )
        return response.json()
    
    def search_memories(self, query, user_id, limit=5):
        """æœç´¢è®°å¿†"""
        data = {
            "query": query,
            "user_id": user_id,
            "limit": limit
        }
        response = requests.post(
            f"{self.base_url}/search/",
            headers=self.headers,
            json=data
        )
        return response.json()

# ä½¿ç”¨ç¤ºä¾‹
client = Mem0Client(api_key="your_api_key")

# æ·»åŠ è®°å¿†
messages = [
    {"role": "user", "content": "æˆ‘æ˜å¤©è¦å‚åŠ é‡è¦ä¼šè®®"},
    {"role": "assistant", "content": "æˆ‘ä¼šå¸®æ‚¨è®°ä½è¿™ä¸ªé‡è¦ä¼šè®®"}
]
result = client.add_memory(messages, user_id="user_123")
print(f"è®°å¿†å·²æ·»åŠ : {result}")

# æœç´¢è®°å¿†
memories = client.search_memories("ä¼šè®®", user_id="user_123")
print(f"æ‰¾åˆ°ç›¸å…³è®°å¿†: {memories}")
```

### èŠå¤©æœºå™¨äººé›†æˆç¤ºä¾‹

```python
from openai import OpenAI
import requests

class ChatBotWithMemory:
    def __init__(self, openai_api_key, mem0_api_key, mem0_base_url="http://localhost:8000"):
        self.openai_client = OpenAI(api_key=openai_api_key)
        self.mem0_client = Mem0Client(mem0_base_url, mem0_api_key)
    
    def chat(self, message, user_id):
        # æœç´¢ç›¸å…³è®°å¿†
        memories = self.mem0_client.search_memories(message, user_id, limit=3)
        memory_context = "\n".join([
            f"- {mem['content']}" for mem in memories.get('results', [])
        ])
        
        # æ„å»ºæç¤ºè¯
        system_prompt = f"""ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„AIåŠ©æ‰‹ã€‚
        åŸºäºä»¥ä¸‹ç”¨æˆ·è®°å¿†æ¥å›ç­”é—®é¢˜ï¼š
        {memory_context}
        
        è¯·æä¾›ä¸ªæ€§åŒ–çš„å›ç­”ã€‚"""
        
        # è°ƒç”¨ OpenAI
        response = self.openai_client.chat.completions.create(
            model="gpt-4o-mini",
            messages=[
                {"role": "system", "content": system_prompt},
                {"role": "user", "content": message}
            ]
        )
        
        assistant_response = response.choices[0].message.content
        
        # ä¿å­˜æ–°çš„å¯¹è¯è®°å¿†
        conversation = [
            {"role": "user", "content": message},
            {"role": "assistant", "content": assistant_response}
        ]
        self.mem0_client.add_memory(conversation, user_id)
        
        return assistant_response

# ä½¿ç”¨ç¤ºä¾‹
bot = ChatBotWithMemory(
    openai_api_key="your_openai_key",
    mem0_api_key="your_mem0_key"
)

response = bot.chat("ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ", user_id="user_123")
print(response)
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tulpn | grep :8000
   
   # æ£€æŸ¥ Docker æ—¥å¿—
   docker-compose logs mem0
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
   docker-compose ps postgres neo4j
   
   # é‡å¯æ•°æ®åº“æœåŠ¡
   docker-compose restart postgres neo4j
   ```

3. **API è®¤è¯å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç¯å¢ƒå˜é‡
   docker-compose exec mem0 env | grep API_KEY
   ```

### æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
   ```sql
   -- PostgreSQL ç´¢å¼•ä¼˜åŒ–
   CREATE INDEX IF NOT EXISTS idx_memories_user_id ON memories(user_id);
   CREATE INDEX IF NOT EXISTS idx_memories_created_at ON memories(created_at);
   ```

2. **å†…å­˜é…ç½®**
   ```yaml
   # docker-compose.yml
   services:
     postgres:
       environment:
         - POSTGRES_SHARED_BUFFERS=256MB
         - POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
   ```

### æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f mem0

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´èŒƒå›´çš„æ—¥å¿—
docker-compose logs --since="2024-01-01" --until="2024-01-02" mem0

# å¯¼å‡ºæ—¥å¿—
docker-compose logs mem0 > mem0.log
```

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è¿è¡Œæµ‹è¯•
pytest tests/

# ä»£ç æ ¼å¼åŒ–
black .
flake8 .
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache 2.0 è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è‡´è°¢

- æ„Ÿè°¢ [Mem0](https://mem0.ai) å›¢é˜Ÿæä¾›çš„ä¼˜ç§€åŸºç¡€æ¡†æ¶
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„åŠªåŠ›å’Œæ”¯æŒ

---

<p align="center">
  <strong>ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼</strong>
</p>